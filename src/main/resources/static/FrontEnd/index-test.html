<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="utf-8" />
    <meta name="viewport" content="initial-scale=1, width=device-width" />
    <title>Volunteer Link</title>
    <link rel="stylesheet" href="./global.css" />
    <link rel="stylesheet" href="./index-test.css" />
    <link rel="stylesheet" href="./index.css" />
    <link rel="stylesheet" href="https://fonts.googleapis.com/css2?family=Inter:wght@400;500;600;700&display=swap" />
</head>
<body>
    <div class="events-page">
        <header class="nav-bar1">
          <div class="nav-bar-background1"></div>
          <img
            class="sac-state-logo1"
            loading="lazy"
            alt=""
            src="./public/sac-state-logo@2x.png"
          />

          <nav class="branching-logic">
            <nav class="apply-group">
              <h3 class="apply1">APPLY</h3>
              <h3 class="experience1">EXPERIENCE</h3>
              <h3 class="give1">GIVE</h3>
            </nav>
          </nav>
        </header>
        <section class="input-provider">
          <div class="spotlight-element1">
            <div class="spotlight-background1"></div>
            <h1 class="volunteer-link1">Volunteer Link</h1>
            <div class="condition-checker">
              <button class="login-button" id="loginButton">
                <div class="login-button-child"></div>
                <b class="login">Login</b>
              </button>
            </div>
          </div>
        </section>
        <section class="image-modifier">
          <div class="data-flow-control-parent">
            <div class="data-flow-control"></div>
            <div class="error-handler">
              <div class="delimiter-parser">
                <div class="constant-provider">
                  <div style = "position:relative; top:2px;">
                  <div class="rate-limiter">
                    <div class="format-converter">
                      <b class="search">Search</b>
                      <div class="search-field"></div>
                    </div>
                    <div class="image-cropper">
                      <div class="sac-state-calendars-parent">
                        <b class="sac-state-calendars">Sac State Calendars</b>
                        <div class="data-validation">
                          <div class="image-blender">
                            <input class="bubble" type="checkbox" />

                            <div class="error-collector">
                              <div class="sac-state">Sac State</div>
                            </div>
                          </div>
                          <div class="error-forwarder">
                            <div class="bubble-parent">
                              <input class="bubble1" type="checkbox" />

                              <div class="image-overlay">
                                <div class="academic">Academic</div>
                              </div>
                            </div>
                          </div>
                          <div class="error-forwarder1">
                            <div class="bubble-group">
                              <input class="bubble2" type="checkbox" />

                              <div class="admission-outreach-wrapper">
                                <div class="admission-outreach">
                                  Admission & Outreach
                                </div>
                              </div>
                            </div>
                          </div>
                          <div class="image-separator">
                            <div class="image-enhancer-parent">
                              <div class="image-enhancer">
                                <input class="bubble3" type="checkbox" />

                                <div class="sorting-strategy">
                                  <div class="alumni">Alumni</div>
                                </div>
                              </div>
                              <div class="image-enhancer1">
                                <input class="bubble4" type="checkbox" />

                                <div class="art-entertainment-wrapper">
                                  <div class="art-entertainment">
                                    Art & Entertainment
                                  </div>
                                </div>
                              </div>
                              <div class="image-enhancer2">
                                <div class="bubble-container">
                                  <input class="bubble5" type="checkbox" />

                                  <div class="department-of-art-wrapper">
                                    <div class="department-of-art">
                                      Department of Art
                                    </div>
                                  </div>
                                </div>
                              </div>
                              <div class="image-enhancer3">
                                <div class="bubble-parent1">
                                  <input class="bubble6" type="checkbox" />

                                  <div
                                    class="department-of-theatre-dance-wrapper"
                                  >
                                    <div class="department-of-theatre">
                                      Department of Theatre & Dance
                                    </div>
                                  </div>
                                </div>
                              </div>
                              <div class="image-enhancer4">
                                <div class="bubble-parent2">
                                  <input class="bubble7" type="checkbox" />

                                  <div class="school-of-music-wrapper">
                                    <div class="school-of-music">
                                      School of Music
                                    </div>
                                  </div>
                                </div>
                              </div>
                            </div>
                          </div>
                          <div class="error-forwarder2">
                            <div class="bubble-parent3">
                              <input class="bubble8" type="checkbox" />

                              <div class="asi-wrapper">
                                <div class="asi">ASI</div>
                              </div>
                            </div>
                          </div>
                        </div>
                      </div>
                      <div class="error-processor-wrapper">
                        <div class="error-processor">
                          <div class="data-hub">
                            <input class="bubble9" type="checkbox" />

                            <input class="bubble10" type="checkbox" />
                          </div>
                          <div class="error-processor-inner">
                            <div class="asi-peak-adventures-parent">
                              <div class="asi-peak-adventures">
                                ASI Peak Adventures
                              </div>
                              <div class="sacramento-state-aquatic">
                                Sacramento State Aquatic Center
                              </div>
                            </div>
                          </div>
                        </div>
                      </div>
                      <div class="fuzzy-matcher">
                        <div class="bubble-parent4">
                          <input class="bubble11" type="checkbox" />

                          <div class="sorting-algorithm">
                            <div class="commencement">Commencement</div>
                          </div>
                        </div>
                      </div>
                      <div class="fuzzy-matcher1">
                        <div class="bubble-parent5">
                          <input class="bubble12" type="checkbox" />

                          <div class="community-engagement-center-wrapper">
                            <div class="community-engagement-center">
                              Community Engagement Center
                            </div>
                          </div>
                        </div>
                      </div>
                      <div class="fuzzy-matcher2">
                        <div class="bubble-parent6">
                          <input class="bubble13" type="checkbox" />

                          <div class="diversity-inclusion-wrapper">
                            <div class="diversity-inclusion">
                              Diversity & Inclusion
                            </div>
                          </div>
                        </div>
                      </div>
                      <div class="fuzzy-matcher3">
                        <div class="bubble-parent7">
                          <input class="bubble14" type="checkbox" />

                          <div class="multifaith-holidays-wrapper">
                            <div class="multifaith-holidays">
                              Multifaith Holidays
                            </div>
                          </div>
                        </div>
                      </div>
                      <div class="fuzzy-matcher4">
                        <div class="bubble-parent8">
                          <input class="bubble15" type="checkbox" />

                          <div class="health-wellness-wrapper">
                            <div class="health-wellness">Health & Wellness</div>
                          </div>
                        </div>
                      </div>
                      <div class="fuzzy-matcher5">
                        <div class="bubble-parent9">
                          <input class="bubble16" type="checkbox" />

                          <div class="student-health-counseling-se-wrapper">
                            <div class="student-health">
                              Student Health & Counseling Services
                            </div>
                          </div>
                        </div>
                      </div>
                      <div class="fuzzy-matcher6">
                        <div class="bubble-parent10">
                          <input class="bubble17" type="checkbox" />

                          <div class="sac-state-featured-wrapper">
                            <div class="sac-state-featured">
                              Sac State Featured
                            </div>
                          </div>
                        </div>
                      </div>
                      <div class="fuzzy-matcher7">
                        <div class="bubble-parent11">
                          <input class="bubble18" type="checkbox" />

                          <div class="sac-state-university-library-wrapper">
                            <div class="sac-state-university">
                              Sac State University Library
                            </div>
                          </div>
                        </div>
                      </div>
                      <div class="fuzzy-matcher8">
                        <div class="bubble-parent12">
                          <input class="bubble19" type="checkbox" />

                          <div class="sport-recreation-wrapper">
                            <div class="sport-recreation">Sport & Recreation</div>
                          </div>
                        </div>
                      </div>
                      <div class="fuzzy-matcher9">
                        <div class="bubble-parent13">
                          <input class="bubble20" type="checkbox" />

                          <div class="sac-state-hornets-sports-wrapper">
                            <div class="sac-state-hornets">
                              Sac State Hornets Sports
                            </div>
                          </div>
                        </div>
                      </div>
                      <div class="fuzzy-matcher10">
                        <div class="bubble-parent14">
                          <input class="bubble21" type="checkbox" />

                          <div class="student-life-wrapper">
                            <div class="student-life">Student Life</div>
                          </div>
                        </div>
                      </div>
                      <div class="fuzzy-matcher11">
                        <div class="bubble-parent15">
                          <input class="bubble22" type="checkbox" />

                          <div class="sac-state-career-center-wrapper">
                            <div class="sac-state-career">
                              Sac State Career Center
                            </div>
                          </div>
                        </div>
                      </div>
                      <div class="fuzzy-matcher12">
                        <div class="bubble-parent16">
                          <input class="bubble23" type="checkbox" />

                          <div class="college-of-arts-letters-wrapper">
                            <div class="college-of-arts">
                              College of Arts & Letters
                            </div>
                          </div>
                        </div>
                      </div>
                      <div class="fuzzy-matcher13">
                        <div class="bubble-parent17">
                          <input class="bubble24" type="checkbox" />

                          <div class="college-of-business-wrapper">
                            <div class="college-of-business">
                              College of Business
                            </div>
                          </div>
                        </div>
                      </div>
                      <div class="shape-sphere">
                        <div class="container-crate">
                          <div class="bubble-parent18">
                            <input class="bubble25" type="checkbox" />

                            <div class="button-bundle">
                              <div class="college-of-education">
                                College of Education
                              </div>
                            </div>
                          </div>
                          <div class="bubble-parent19">
                            <input class="bubble26" type="checkbox" />

                            <div class="college-of-engineering-and-com-wrapper">
                              <div class="college-of-engineering">
                                College of Engineering and Computer Science
                              </div>
                            </div>
                          </div>
                        </div>
                      </div>
                    </div>
                  </div>
                </div>


    <div class="event-list" id="event-list">
      <div style = "position:relative; right:1000px;">
    </div>
    <script>
      var loginButton = document.getElementById("loginButton");
      if (loginButton) {
        loginButton.addEventListener("click", function (e) {
          window.location.href = "./login-page.html";
        });
      }

      var myEventsText = document.getElementById("myEventsText");
      if (myEventsText) {
        myEventsText.addEventListener("click", function (e) {
          window.location.href = "./login-page.html";
        });
      }
    </script>
    <script>
      // Function to fetch events from backend and display them
      async function fetchAndDisplayEvents() {
          try {
              const response = await fetch('/events');
              let events = await response.json();

              // Sort events by start date
              events.sort((a, b) => {
                  const startDateA = new Date(a.startDate);
                  const startDateB = new Date(b.startDate);
                  return startDateA - startDateB;
              });

              // Clear previous list items
              const eventList = document.getElementById('event-list');
              eventList.innerHTML = '';

              // Display each event in the sorted list
              events.forEach(event => {
                  const eventName = event.eventName;
                  const eventDescription = event.eventDescription;
                  const startDate = event.startDate ? new Date(event.startDate).toLocaleDateString('en-US', { year: 'numeric', month: '2-digit', day: '2-digit' }) : null;
                  const startTime = event.startDate ? `${new Date(event.startDate).getHours()}:${String(new Date(event.startDate).getMinutes()).padStart(2, '0')}` : null;
                  const endDate = event.endDate ? new Date(event.endDate).toLocaleDateString('en-US', { year: 'numeric', month: '2-digit', day: '2-digit' }) : null;
                  const endTime = event.endDate ? `${new Date(event.endDate).getHours()}:${String(new Date(event.endDate).getMinutes()).padStart(2, '0')}` : null;
                  const volunteersNeeded = event.volunteersNeeded;

                  const eventBox = document.createElement('div');
                  eventBox.classList.add('event-box');
                  eventBox.innerHTML = `
                      <div class="event-name">${eventName}</div>
                      <div class="event-description">${eventDescription}</div>
                      <div class="event-date">Start Date: ${startDate} | Start Time: ${startTime} | End Date: ${endDate} | End Time: ${endTime}</div>
                      <div class="volunteers-needed">Volunteers Needed: ${volunteersNeeded}</div>
                  `;

                  // Check and add tags if they exist
                  if(event.tags && event.tags.length > 0) {
                      const tagsDiv = document.createElement('div');
                      tagsDiv.classList.add('event-tags');
                      event.tags.forEach(tag => {
                          const tagSpan = document.createElement('span');
                          tagSpan.classList.add('event-tag');
                          tagSpan.textContent = tag;
                          tagsDiv.appendChild(tagSpan);
                      });
                      eventBox.appendChild(tagsDiv);
                  }

                  eventList.appendChild(eventBox);
              });
          } catch (error) {
              console.error('Error fetching events:', error);
          }
      }

      // Call the function when the page loads
      fetchAndDisplayEvents();
  </script>

  </body>
</html>